<!DOCTYPE html>
<html>
	<head>
		<title>yafov - Yet Another Form Validator plugin for jQuery</title>
    <link rel="stylesheet" href="style.css" />
    <style type="text/css">
    <!--
    .vimhtml pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #f8f8ff; }
    .vimhtml pre { font-family: monospace; color: #000000; background-color: #f8f8ff; }
    .vimhtml .lnr { color: #959595; background-color: #ececec; font-weight: bold; }
    .vimhtml .PreProc { color: #a0a0a0; font-weight: bold; }
    .vimhtml .Number { color: #1c9898; }
    .vimhtml .Type { color: #445588; font-weight: bold; }
    .vimhtml .String { color: #d81745; }
    .vimhtml .Comment { color: #999988; }
    .Function { color: #990000; font-weight: bold; }
    -->
    </style>
	</head>
	<body>
    <a href="https://github.com/Ajnasz/yafov"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
    <h1>Demo page for yafov - Yet Another Form Validator jQuery plugin</h1>
    <div id="Page">
      <h2>About the plugin</h2>
      <div class="node">

        <div id="download">
          <a href="https://github.com/Ajnasz/yafov/zipball/master">
          <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
          <a href="https://github.com/Ajnasz/yafov/tarball/master">
          <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
        </div>
        <p>The point of this plugin is to create an event based validator which
        does only the validation. So it doesn't want to try to figure out what
        should be the error message and where and how do I want to show it.</p>
        <h3>Why events?</h3>
        <p>Because that's the most felxible way. Events are make possible to
        define AJAX based validators.<br />
        For example on a registration form, if you wan't to check if a username
        is free, you must ask the server using an ajax call. Since it's an
        asynchronous call, you need to handle all validations
        asynchronously.</p>
        <h3>Why are there no pre-defined messages and ways to show the errors?</h3>
        <p>Because every site is different, so trying to find an ultimate way
        to show error messages is a really bad idea. I don't know how do you build your forms, I don't know the language of your site, I don't know it's structure of your forms. So the plugin will does only the validation and you can define how, where and what you will show if an error found.</p>
      </div>
      <h2 id="Demo">More info, documentation</h2>
      <div class="node">
        <ul>
          <li>See the <a href="https://github.com/Ajnasz/yafov/wiki">wiki page</a> for more details.</li>
          <li>See the <a href="https://github.com/Ajnasz/yafov/wiki/Example">example with comments</a>.</li>
          <li>Check out the <a href="#Demo">demo form</a>.</li>
          <li>Check out the <a href="#DemoCode">code of the demo</a>.</li>
          <li>Download from  <a href="https://github.com/Ajnasz/yafov">Github</a></li>
        </ul>
      </div>
      <h2 id="Demo">New HTML5 Input Types</h2>
      <form id="NewTypes" class="node">
        <fieldset>
          <legend>HTML5 Form</legend>
          <div id="Messages"></div>
          <div class="row">
            <label for="TextTest">required: </label><br />
            <input required type="text" id="TextTest" />
          </div>
          <div class="row">
            <label for="TelTest" >tel and required: </label><br />
            <input id="TelTest" type="tel" required />
          </div>
          <div class="row">
            <label for="EmailTest">email and required: </label><br />
            <input type="email" id="EmailTest" required />
          </div>
          <div class="row">
            <label for="UrlTest">url and required: </label><br />
            <input type="url" type="UrlTest" id="UrlTest" required />
          </div>
          <!--
          <div class="row">
            <label for="SearchTest">search: </label><br />
            <input type="search" id="SearchTest" required />
          </div>
          <div class="row">
            <label for="DatetimeTest">datetime: </label><br />
            <input type="datetime" id="DatetimeTest" required />
          </div>
          <div class="row">
            <label for="DateTest">date: </label><br />
            <input type="date" id="DateTest" required />
          </div>
          <div class="row">
            <label for="MonthTest">month: </label><br />
            <input type="month" id="MonthTest" required />
          </div>
          <div class="row">
            <label for="WeekTest">week: </label><br />
            <input type="week" id="WeekTest" required />
          </div>
          <div class="row">
            <label for="TimeTest">time: </label><br />
            <input type="time" id="TimeTest" required />
          </div>
          <div class="row">
            <label for="DateTimeLocalTest">datetime-local: </label><br />
            <input type="datetime-local" id="DateTimeLocalTest" required />
          </div>
          -->
          <div class="row">
            <label for="NumberTest">number and required: </label><br />
            <input type="number" id="NumberTest" required />
          </div>
          <div class="row">
            <label for="RangeTest">range and NOT required: </label><br />
            <input type="range" id="RangeTest" min="5" max="10" />
          </div>
          <!--
          <div class="row">
            <label for="ColorTest">color: </label><br />
            <input type="color" id="ColorTest" required />
          </div>
          -->
          <input type="submit" value="Submit" />
          <button type="button" id="TelValidate">Validate tel!</button>
        </fieldset>
      </form>
      <h2 id="DemoCode">Demo code</h2>
      <div class="node vimhtml">
<pre>
<span class="lnr"> 1 </span>$(document).ready(<span class="Function">function</span> () {
<span class="lnr"> 2 </span><span class="Comment">    // add custom method</span>
<span class="lnr"> 3 </span>    $.yafov.addMethod(<span class="String">'[type=&quot;tel&quot;]'</span>, <span class="String">'telfoobar'</span>, <span class="Function">function</span> (value, element, cb) {
<span class="lnr"> 4 </span>        $(element).addClass(<span class="String">'load'</span>);
<span class="lnr"> 5 </span><span class="Comment">        // imagine that this is an ajax call, and the function is the</span>
<span class="lnr"> 6 </span><span class="Comment">        // called when the request was success</span>
<span class="lnr"> 7 </span>        setTimeout(<span class="Function">function</span> () {
<span class="lnr"> 8 </span>            <span class="Type">var</span> isValid = value !== <span class="String">'123'</span>;
<span class="lnr"> 9 </span>            cb(isValid);
<span class="lnr">10 </span>            $(element).removeClass(<span class="String">'load'</span>);
<span class="lnr">11 </span>        }, <span class="Number">1000</span>);
<span class="lnr">12 </span>    });
<span class="lnr">13 </span>
<span class="lnr">14 </span><span class="Comment">    // Initialize the validator</span>
<span class="lnr">15 </span>    <span class="Type">var</span> validator = $(<span class="String">'#NewTypes'</span>).yafov();
<span class="lnr">16 </span>
<span class="lnr">17 </span><span class="Comment">    // Listen to invalidfound event and show error</span>
<span class="lnr">18 </span>    validator.bind(<span class="String">'invalidfound'</span>, <span class="Function">function</span> (e, error) {
<span class="lnr">19 </span>        <span class="Type">var</span> field = $(error.field);
<span class="lnr">20 </span>        <span class="Type">var</span> fieldId = field.attr(<span class="String">'id'</span>);
<span class="lnr">21 </span>
<span class="lnr">22 </span><span class="Comment">        // default error message</span>
<span class="lnr">23 </span>        <span class="Type">var</span> msg = <span class="String">'Error found: '</span> + error.name;
<span class="lnr">24 </span>
<span class="lnr">25 </span><span class="Comment">        // checking the name of the validation result to find out what was the error</span>
<span class="lnr">26 </span>        <span class="Statement">switch</span> (error.name) {
<span class="lnr">27 </span>        <span class="Statement">case</span> <span class="String">'required'</span>:
<span class="lnr">28 </span>            msg = <span class="String">'The field is required.'</span>;
<span class="lnr">29 </span>            <span class="Statement">break</span>;
<span class="lnr">30 </span>        <span class="Statement">case</span> <span class="String">'number'</span>:
<span class="lnr">31 </span>            msg = <span class="String">'The value must be a number.'</span>;
<span class="lnr">32 </span>            <span class="Statement">break</span>;
<span class="lnr">33 </span>        <span class="Statement">case</span> <span class="String">'email'</span>:
<span class="lnr">34 </span>            msg = <span class="String">'Please enter a valid email address.'</span>;
<span class="lnr">35 </span>            <span class="Statement">break</span>;
<span class="lnr">36 </span>        <span class="Statement">case</span> <span class="String">'url'</span>:
<span class="lnr">37 </span>            msg = <span class="String">'Please enter a valid url.'</span>;
<span class="lnr">38 </span>            <span class="Statement">break</span>;
<span class="lnr">39 </span>        }
<span class="lnr">40 </span>        field.addClass(<span class="String">'error'</span>).removeClass(<span class="String">'valid'</span>);
<span class="lnr">41 </span>        field.parent().find(<span class="String">'label.error'</span>).remove().end()
<span class="lnr">42 </span>        .append($(<span class="String">'&lt;label class=&quot;error&quot;'</span> + (fieldId ? <span class="String">' for=&quot;'</span> + fieldId + <span class="String">'&quot;'</span> : <span class="String">''</span>) + <span class="String">'&gt;'</span> + msg + <span class="String">'&lt;/label&gt;'</span>));
<span class="lnr">43 </span>    });
<span class="lnr">44 </span>
<span class="lnr">45 </span><span class="Comment">    // Listen to validfound event and remove the error message if needed</span>
<span class="lnr">46 </span>    validator.bind(<span class="String">'validfound'</span>, <span class="Function">function</span> (e, error, element) {
<span class="lnr">47 </span>        <span class="Type">var</span> field = $(error.field);
<span class="lnr">48 </span>        field.removeClass(<span class="String">'error'</span>).addClass(<span class="String">'valid'</span>);
<span class="lnr">49 </span>        field.parent().find(<span class="String">'label.error'</span>).remove();
<span class="lnr">50 </span>    });
<span class="lnr">51 </span>
<span class="lnr">52 </span><span class="Comment">    // Listen to formvalid event and submit the form</span>
<span class="lnr">53 </span>    validator.bind(<span class="String">'formvalid'</span>, <span class="Function">function</span> (e, args) {
<span class="lnr">54 </span><span class="Comment">        // this.submit();</span>
<span class="lnr">55 </span>    });
<span class="lnr">56 </span>
<span class="lnr">57 </span><span class="Comment">    // Listen to forminvalid and do nothing now :) You may wan't to log the issues</span>
<span class="lnr">58 </span>    validator.bind(<span class="String">'forminvalid'</span>, <span class="Function">function</span> (e, args) {
<span class="lnr">59 </span>        console.log(<span class="String">'form invalid'</span>)
<span class="lnr">60 </span>    });
<span class="lnr">61 </span>
<span class="lnr">62 </span><span class="Comment">    // When user clicks on #TelValidate button show a message in the #Messages div</span>
<span class="lnr">63 </span>    $(<span class="String">'#TelValidate'</span>).<span class="PreProc">click</span>(<span class="Function">function</span> () {
<span class="lnr">64 </span>        $.yafov.validateWith($(<span class="String">'#telfield'</span>), <span class="String">'required'</span>, <span class="Function">function</span> (isValid) {
<span class="lnr">65 </span>            $(<span class="String">'#Messages'</span>).text(isValid ? <span class="String">'Tel field is valid'</span> : <span class="String">'Tel field is invalid'</span>).addClass(<span class="String">'hasMessage'</span>);
<span class="lnr">66 </span>        });
<span class="lnr">67 </span>    });
<span class="lnr">68 </span>  });
<span class="lnr">69 </span>
</pre>
      </div>
    </div>
		<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
		<script type="text/javascript" src="jquery.yafov.js"></script>

		<script type="text/javascript">
		$(document).ready(function () {
        // add custom method
        $.yafov.addMethod('[type="tel"]', 'telfoobar', function (value, element, cb) {
            $(element).addClass('load');
            // imagine that this is an ajax call, and the function is the
            // called when the request was success
            setTimeout(function () {
                var isValid = value !== '123';
                cb(isValid);
                $(element).removeClass('load');
            }, 1000);
        });

        // Initialize the validator
        var validator = $('#NewTypes').yafov();

        // Listen to invalidfound event and show error
        validator.bind('invalidfound', function (e, error) {
            var field = $(error.field);
            var fieldId = field.attr('id');

            // default error message
            var msg = 'Error found: ' + error.name;

            // checking the name of the validation result to find out what was the error
            switch (error.name) {
            case 'required':
                msg = 'The field is required.';
                break;
            case 'number':
                msg = 'The value must be a number.';
                break;
            case 'email':
                msg = 'Please enter a valid email address.';
                break;
            case 'url':
                msg = 'Please enter a valid url.';
                break;
            }
            field.addClass('error').removeClass('valid');
            field.parent().find('label.error').remove().end()
            .append($('<label class="error"' + (fieldId ? ' for="' + fieldId + '"' : '') + '>' + msg + '</label>'));
        });

        // Listen to validfound event and remove the error message if needed
        validator.bind('validfound', function (e, error, element) {
            var field = $(error.field);
            field.removeClass('error').addClass('valid');
            field.parent().find('label.error').remove();
        });

        // Listen to formvalid event and submit the form
        validator.bind('formvalid', function (e, args) {
            // this.submit();
        });

        // Listen to forminvalid and do nothing now :) You may wan't to log the issues
        validator.bind('forminvalid', function (e, args) {
            console.log('form invalid')
        });

        // When user clicks on #TelValidate button show a message in the #Messages div
        $('#TelValidate').click(function () {
            $.yafov.validateWith($('#telfield'), 'required', function (isValid) {
                console.log(isValid);
                $('#Messages').text(isValid ? 'Tel field is valid' : 'Tel field is invalid').addClass('hasMessage');
            });
        });
      });
		</script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-112351-9']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
	</body>
</html>
