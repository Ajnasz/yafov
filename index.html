<!DOCTYPE html>
<html>
	<head>
		<title>yafov - Yet Another Form Validator plugin for jQuery</title>
    <link rel="stylesheet" href="style.css" />
	</head>
	<body>
    <a href="https://github.com/Ajnasz/yafov"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
    <h1>Demo page for yafov - Yet Another Form Validator jQuery plugin</h1>
    <div id="Page">
      <h2>About the plugin</h2>
      <div class="node">

        <div id="download">
          <a href="https://github.com/Ajnasz/yafov/zipball/master">
            <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
          <a href="https://github.com/Ajnasz/yafov/tarball/master">
            <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
        </div>
        <p>The point of this plugin is to create an event based validator which
        does only the validation. So it doesn't want to try to figure out what
        should be the error message and where and how do I want to show it.</p>
        <h3>Why events?</h3>
        <p>Because that's the most felxible way. Events are make possible to
        define AJAX based validators.<br />
        For example on a registration form, if you wan't to check if a username
        is free, you must ask the server using an ajax call. Since it's an
        asynchronous call, you need to handle all validations
        asynchronously.</p>
        <h3>Why are there no pre-defined messages and ways to show the errors?</h3>
        <p>Because every site is different, so trying to find an ultimate way
        to show error messages is a really bad idea. I don't know how do you build your forms, I don't know the language of your site, I don't know it's structure of your forms. So the plugin will does only the validation and you can define how, where and what you will show if an error found.</p>
      </div>
      <h2 id="Demo">More info, documentation</h2>
      <div class="node">
        <ul>
          <li>See the <a href="https://github.com/Ajnasz/yafov/wiki">wiki page</a> for more details.</li>
          <li>See the <a href="https://github.com/Ajnasz/yafov/wiki/Example">example with comments</a>.</li>
          <li>Check out the <a href="#Demo">demo form</a>.</li>
          <li>Check out the <a href="#DemoCode">code of the demo</a>.</li>
          <li>Download from  <a href="https://github.com/Ajnasz/yafov">Github</a></li>
        </ul>
      </div>
      <h2 id="Demo">New HTML5 Input Types</h2>
      <form id="NewTypes" class="node">
        <fieldset>
          <legend>HTML5 Form</legend>
          <div id="Messages"></div>
          <div class="row">
            <label for="TextTest">required: </label><br />
            <input required type="text" id="TextTest" />
          </div>
          <div class="row">
            <label for="TelTest" >tel and required: </label><br />
            <input id="TelTest" type="tel" required />
          </div>
          <div class="row">
            <label for="EmailTest">email and required: </label><br />
            <input type="email" id="EmailTest" required />
          </div>
          <div class="row">
            <label for="UrlTest">url and required: </label><br />
            <input type="url" type="UrlTest" id="UrlTest" required />
          </div>
          <!--
          <div class="row">
            <label for="SearchTest">search: </label><br />
            <input type="search" id="SearchTest" required />
          </div>
          <div class="row">
            <label for="DatetimeTest">datetime: </label><br />
            <input type="datetime" id="DatetimeTest" required />
          </div>
          <div class="row">
            <label for="DateTest">date: </label><br />
            <input type="date" id="DateTest" required />
          </div>
          <div class="row">
            <label for="MonthTest">month: </label><br />
            <input type="month" id="MonthTest" required />
          </div>
          <div class="row">
            <label for="WeekTest">week: </label><br />
            <input type="week" id="WeekTest" required />
          </div>
          <div class="row">
            <label for="TimeTest">time: </label><br />
            <input type="time" id="TimeTest" required />
          </div>
          <div class="row">
            <label for="DateTimeLocalTest">datetime-local: </label><br />
            <input type="datetime-local" id="DateTimeLocalTest" required />
          </div>
          -->
          <div class="row">
            <label for="NumberTest">number and required: </label><br />
            <input type="number" id="NumberTest" required />
          </div>
          <div class="row">
            <label for="RangeTest">range and NOT required: </label><br />
            <input type="range" id="RangeTest" min="5" max="10" />
          </div>
          <div class="row">
            <input type="checkbox" id="CheckboxTest" required />
            <label for="CheckboxTest">required checkbox</label>
          </div>
          <h3>Group validators</h3>
          <div class="row">
            <fieldset>
              <legend>Group 1</legend>
              <label for="RadioTest1">Radio 1</label>
              <input type="radio" name="radiotest" id="RadioTest1" value="1" required />

              <label for="RadioTest2">Radio2</label>
              <input type="radio" name="radiotest" id="RadioTest2" value="2" required />
            </fieldset>
          </div>
          <div class="row">
            <fieldset>
              <legend>Group 2</legend>
              <label for="Radio2Test1">Radio1</label>
              <input type="radio" name="radio2test" id="Radio2Test1" value="1" required />

              <label for="Radio2Test2">Radio2</label>
              <input type="radio" name="radio2test" id="Radio2Test2" value="2" required />
            </fieldset>
          </div>
          <fieldset>
            <legend>Custom group test</legend>
            <div class="row">
              <label for="DateTest1">Year:</label>
              <input type="text" name="year1" id="DateTest1" value="" class="datetest year" size="4" />

              <label for="DateTest2">Month:</label>
              <input type="text" name="month1" id="DateTest2" value="" class="datetest month"  size="2"/>

              <label for="DateTest3">Day:</label>
              <input type="text" name="day1" id="DateTest3" value="" class="datetest day" size="2" />
            </div>
            <div class="row">
              <label for="Date2Test1">Year:</label>
              <input type="text" name="year2" id="Date2Test1" value="" class="datetest year" size="4" />

              <label for="RadioTest2">Month:</label>
              <input type="text" name="month2" id="Date2Test2" value="" class="datetest month"  size="2"/>

              <label for="RadioTest2">Day:</label>
              <input type="text" name="day2" id="Date2Test2" value="" class="datetest day" size="2" />
            </div>
          </fieldset>
          <!--
          <div class="row">
            <label for="ColorTest">color: </label><br />
            <input type="color" id="ColorTest" required />
          </div>
          -->
          <input type="submit" value="Submit" />
          <button type="button" id="ForceTelValidate" title="Force to validate one field">Force tel field validation</button>
          <button type="button" id="TelValidate" title="Validate tel field but only with the telfoobar validator">Validate with telfoobar method</button>
        </fieldset>
      </form>
      <h2 id="DemoCode">Demo code</h2>
      <div class="node vimhtml">
        <script src="https://gist.github.com/1455919.js"> </script>
      </div>
    </div>
		<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
		<script type="text/javascript" src="jquery.yafov.js"></script>

    <script type="text/javascript">

$(document).ready(function () {
    // add custom method
    $.yafov.addMethod('[type="tel"]', 'telfoobar', function (value, element, cb) {
        $(element).addClass('load');
        // imagine that this is an ajax call, and the function is the callback
        setTimeout(function () {
            var isValid = value !== '123';
            cb(isValid);
            $(element).removeClass('load');
        }, 1000);
    });

    // add a custom group validator
    // that going to handle 3 elements as one
    $.yafov.addGroupMethod(
        '.datetest',
        'datetest',
        /**
         * that method will do the validation
         * the elements variable will contain all elements of the group
         * the elements are collected by the function what you need to pass as
         * the 4th argument
         * The value argument here doesn't make too much sense..
         */
        function datetestGroupValiadator(value, elements, cb) {
            // presume that the field is valid
            var valid = true;
            // check for the format of the fields, everything should be number
            // you may wan't to make it more strict, but it's OK for now
            elements.each(function () {
                valid = valid && this.value !== '' && !isNaN(+this.value);
            });
            // if the format is OK, check the actual value
            if (valid) {
                // get the values
                var year = elements.filter('.year').val(),
                    month = elements.filter('.month').val(),
                    day = elements.filter('.day').val(),

                    // create date objects what we will compare
                    date = new Date(), now = new Date();

                // set year, month and day
                date.setFullYear(year);
                date.setMonth(month - 1);
                date.setDate(day);

                // compare the dates, if date.getTime() is greater then
                // now.getTime() the entered date should be ok
                valid = date.getTime() > now.getTime();
            }
            cb(valid);
        },
        /**
         * collects all elements which belongs to the group
         * has one parameter, which is the reference to a element from the
         * group as a jQuery object
         */
        function datetestGetGroupItems(elem) {
            // in that example we keep the elements of a group in a div which has a "row" class
            var form = elem.closest('.row'),
                elements;

            // collect all elements with datest class in the row div
            elements = form.find('.datetest');
            return elements;
        }
    );

    // Initialize the validator
    var validator = $('#NewTypes').yafov();

    // Listen to invalidfound event and show error
    validator.bind('invalidfound', function (e, error) {
        var field = $(error.field);
        var fieldId = field.attr('id');

        // default error message
        var msg = 'Error found: ' + error.name;

        // checking the name of the validation result to find out what was the error
        switch (error.name) {
        case 'required':
            // you can see if it's an error of a group
            if (error.isGroup) {
                msg = 'The field is required. (group)';
            } else {
                msg = 'The field is required.';
            }
            break;
        case 'number':
            msg = 'The value must be a number.';
            break;
        case 'email':
            msg = 'Please enter a valid email address.';
            break;
        case 'url':
            msg = 'Please enter a valid url.';
            break;
        case 'datetest':
            msg = 'The date must be later than today';
            break;
        }
        field.addClass('error').removeClass('valid');
        var label = $('<label />');
        label.addClass('error').attr('for', fieldId).text(msg);
        field
          // remove existing error message
          .parent().find('label.error').remove()
          .end()
          // add new error message
          .append(label);
    });

    // Listen to validfound event and remove the error message if needed
    validator.bind('validfound', function (e, error, element) {
        var field = $(error.field);
        field.removeClass('error').addClass('valid');
        field.parent().find('label.error').remove();
    });

    // Listen to formvalid event and submit the form
    validator.bind('formvalid', function (e, args) {
        // this.submit();
        $('#Messages').text('the form is valid').addClass('hasMessage');
    });

    // Listen to forminvalid and do nothing now :) You may wan't to log the issues
    validator.bind('forminvalid', function (e, args) {
        $('#Messages').text('the form is invalid').addClass('hasMessage');
        // scroll to the first invalid element
       window.scrollTo(0, args.errors[0].field.parent().position().top - 10);
    });

    // When user clicks on #TelValidate button only one validator method will
    // be called only on one field and our callback will put a message into the Messages div
    $('#TelValidate').click(function () {
        $.yafov.validateWith($('#TelTest'), 'required', function (isValid) {
            var msg = 'The tel field is valid';
            if (isValid) {
                msg = 'The tel field is invalid';
            }
            msg += '<br />Using the <code>$.yafov.validateWith</code> method, you can check if a field passes a (only one) validator method, but it won\'t trigger any events, you must handle everything in the callback method.';
            $('#Messages').html(msg).addClass('hasMessage');
            // scroll back to the message, so the user can see it
            window.scrollTo(0, $('#Messages').closest('form').position().top);
        });
    });
    $('#ForceTelValidate').click(function () {
        $.yafov.validate($('#TelTest'), function (result) {
            var msg = 'The tel field is valid';
            if (result.isValid) {
                msg = 'The tel field is invalid'; 
            }
            msg += '<br />Using the <code>$.yafov.validate</code> method, you can check if a field passes all validations, and validfound or invalidfound events will be triggered.';
            $('#Messages').html(msg).addClass('hasMessage');
            // scroll back to the message, so the user can see it
            window.scrollTo(0, $('#Messages').closest('form').position().top);
        });
    });
});
    </script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-112351-9']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
	</body>
</html>
